<script lang="ts" setup>
import { Line } from 'vue-chartjs';
import {
  Chart as ChartJS,
  Title,
  Tooltip,
  Legend,
  PointElement,
  LineElement,
  CategoryScale,
  LinearScale,
  type InteractionAxis,
  type InteractionMode,
} from 'chart.js';

const hoverLine = {
  id: 'hoverLine',
  afterDatasetsDraw(chart: ChartJS, args, plugins) {
    const {
      ctx,
      tooltip,
      chartArea: { top, bottom, left, right, width, height },
      scales: { x, y },
    } = chart;

    if (tooltip?._active.length > 0) {
      const xCoor = x.getPixelForValue(tooltip!.dataPoints![0].dataIndex);
      const yCoor = y.getPixelForValue(tooltip!.dataPoints![0].parsed.y);

      ctx.save();
      ctx.beginPath();
      ctx.lineWidth = 2;
      ctx.strokeStyle = 'rgba(255, 255, 255, 1)';
      ctx.moveTo(xCoor, top);
      ctx.lineTo(xCoor, bottom);
      ctx.stroke();
      ctx.closePath();
    }
  },
};

ChartJS.register(
  Title,
  Tooltip,
  Legend,
  PointElement,
  LineElement,
  CategoryScale,
  LinearScale,
  hoverLine,
);

const chartData = {
  labels: [
    '1 Days ago',
    '2 Days ago',
    '3 Days ago',
    '4 Days ago',
    '5 Days ago',
    '6 Days ago',
    '7 Days ago',
    '8 Days ago',
    '9 Days ago',
    '10 Days ago',
    '11 Days ago',
    '12 Days ago',
    '13 Days ago',
    '14 Days ago',
    '15 Days ago',
    '16 Days ago',
    '17 Days ago',
    '18 Days ago',
    '19 Days ago',
    '20 Days ago',
    '21 Days ago',
    '22 Days ago',
    '23 Days ago',
    '24 Days ago',
    '25 Days ago',
    '26 Days ago',
    '27 Days ago',
    '28 Days ago',
    '29 Days ago',
    '30 Days ago',
    '31 Days ago',
    '32 Days ago',
    '33 Days ago',
    '34 Days ago',
    '35 Days ago',
    '36 Days ago',
    '37 Days ago',
    '38 Days ago',
    '39 Days ago',
    '40 Days ago',
    '41 Days ago',
    '42 Days ago',
    '43 Days ago',
    '44 Days ago',
    '45 Days ago',
    '46 Days ago',
    '47 Days ago',
    '48 Days ago',
    '49 Days ago',
    '50 Days ago',
    '51 Days ago',
    '52 Days ago',
    '53 Days ago',
    '54 Days ago',
    '55 Days ago',
    '56 Days ago',
    '57 Days ago',
    '58 Days ago',
    '59 Days ago',
    '60 Days ago',
    '61 Days ago',
    '62 Days ago',
    '63 Days ago',
    '64 Days ago',
    '65 Days ago',
    '66 Days ago',
    '67 Days ago',
    '68 Days ago',
    '69 Days ago',
    '70 Days ago',
    '71 Days ago',
    '72 Days ago',
    '73 Days ago',
    '74 Days ago',
    '75 Days ago',
    '76 Days ago',
    '77 Days ago',
    '78 Days ago',
    '79 Days ago',
    '80 Days ago',
    '81 Days ago',
    '82 Days ago',
    '83 Days ago',
    '84 Days ago',
    '85 Days ago',
    '86 Days ago',
    '87 Days ago',
    '88 Days ago',
    '89 Days ago',
    '90 Days ago',
  ],
  datasets: [
    // {
    //   label: 'PP',
    //   fill: true,
    //   tension: 0.5,
    //   data: [
    //     '253',
    //     '71',
    //     '174',
    //     '109',
    //     '217',
    //     '215',
    //     '272',
    //     '264',
    //     '115',
    //     '160',
    //     '234',
    //     '201',
    //     '205',
    //     '185',
    //     '195',
    //     '285',
    //     '144',
    //     '136',
    //     '221',
    //     '135',
    //     '256',
    //     '282',
    //     '151',
    //     '282',
    //     '250',
    //     '276',
    //     '221',
    //     '316',
    //     '319',
    //     '229',
    //     '309',
    //     '265',
    //     '384',
    //     '242',
    //     '317',
    //     '228',
    //     '306',
    //     '192',
    //     '344',
    //     '387',
    //     '242',
    //     '437',
    //     '317',
    //     '239',
    //     '301',
    //     '276',
    //     '407',
    //     '192',
    //     '338',
    //     '220',
    //     '247',
    //     '327',
    //     '360',
    //     '363',
    //     '353',
    //     '348',
    //     '365',
    //     '325',
    //     '474',
    //     '447',
    //     '278',
    //     '465',
    //     '280',
    //     '527',
    //     '327',
    //     '223',
    //     '297',
    //     '572',
    //     '301',
    //     '444',
    //     '381',
    //     '408',
    //     '300',
    //     '435',
    //     '399',
    //     '431',
    //     '549',
    //     '230',
    //     '456',
    //     '474',
    //     '466',
    //     '297',
    //     '296',
    //     '372',
    //     '432',
    //     '482',
    //     '248',
    //     '364',
    //     '566',
    //     '408',
    //   ],
    // },
    {
      label: 'Rank',
      tension: 0,
      data: [
        '408',
        '566',
        '364',
        '248',
        '482',
        '432',
        '372',
        '296',
        '297',
        '466',
        '474',
        '456',
        '230',
        '549',
        '431',
        '399',
        '435',
        '300',
        '408',
        '381',
        '444',
        '301',
        '572',
        '297',
        '223',
        '327',
        '527',
        '280',
        '465',
        '278',
        '447',
        '474',
        '325',
        '365',
        '348',
        '353',
        '363',
        '360',
        '327',
        '247',
        '220',
        '338',
        '192',
        '407',
        '276',
        '301',
        '239',
        '317',
        '437',
        '242',
        '387',
        '344',
        '192',
        '306',
        '228',
        '317',
        '242',
        '384',
        '265',
        '309',
        '229',
        '319',
        '316',
        '221',
        '276',
        '250',
        '282',
        '151',
        '282',
        '256',
        '135',
        '221',
        '136',
        '144',
        '285',
        '195',
        '185',
        '205',
        '201',
        '234',
        '160',
        '115',
        '264',
        '272',
        '215',
        '217',
        '109',
        '174',
        '71',
        '253',
      ],
    },
  ],
};

const chartOptions = {
  type: 'line',
  scaleShowLabels: false,
  responsive: true,
  maintainAspectRatio: false,
  scales: {
    x: {
      display: false,
    },
    y: {
      display: false,
    },
  },
  customCanvasBackgroundColor: '#262626',
  borderWidth: 4,
  borderColor: '#FFFFFF',
  interaction: {
    mode: 'nearest' as InteractionMode,
    axis: 'x' as InteractionAxis,
  },
  pointStyle: 'circle',
  pointRadius: 0,
  pointBackgroundColor: '#262626',
  pointBorderWidth: 4,
  pointBorderColor: '#FFFFFF',
  hitRadius: 100,
  hoverRadius: 8,
  hoverBorderWidth: 3,
  transitions: {
    active: {
      animation: {
        duration: 0,
      },
    },
  },
  plugins: {
    legend: {
      display: false,
    },
  },
  padding: 10,
};
</script>

<template>
  <div class="graph-wrapper">
    <Line id="pp-chart" :options="chartOptions" :data="chartData" class="graph">
    </Line>
  </div>
</template>

<style lang="scss" scoped>
.graph-wrapper {
  display: flex;
}

.graph {
  width: 600px;
  height: 80px;
  background-color: transparent;
  color: $main;
}
</style>
